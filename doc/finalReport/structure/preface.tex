
    有限元法基础是清华大学首批四门“挑战性示范课程”之一，基于有限元程序~\texttt{STAP++}~的功能扩展的课程大作业对同学们的知识迁移与应用、程序设计与实现、时间的分配与管理以及团队分工与合作等能力都提出了比较高的要求，无疑很好地诠释了挑战性的意义。这篇报告正是对我们团队近三个月以来工作成果的集中总结，同时也作为扩展后的~\texttt{STAP++}~程序的说明文档以飨读者。

    第~\ref{chap:1}~章对桥梁算例作了概括性的描述，并给出了大规模算例的评测结果以及后处理得到的变形图象与应力云图。值得一提的是，在内存优化的评测中，本组以领先第二名近一倍的成绩拔得了所有使用稀疏直接求解器的小组中的头筹。与此同时，本组在保证程序的稳健性与计算结果的精度的基础上，在程序效率的评测方面也名列前茅。除此之外，在充分考虑了约束方式的合理性以及约束输入格式的多样性的基础上，本组的位移图像与应力云图均取得了与~Abaqus~最为接近的结果。

    第~\ref{chap:2}~章介绍了扩展后~\texttt{STAP++}~程序的框架，具体包括前处理模块、组装刚度阵、求解器模块、后处理模块以及测试模块。有关具体的输入输出文件格式，可以参看附录~\ref{app:1}~和附录~\ref{app:2}。
    \begin{itemize}
      \item 前处理使用~\texttt{Python}~完成。我们的前处理不仅严格遵守了~\texttt{STAP++}~的约定输入格式，输出的~\texttt{dat}~输入文件完全兼容已有标准，而且对输入参数也具有一定的鲁棒性。
      \item 后处理使用~Tecplot~完成。我们的后处理较为充分考虑了工程实际的需要，输出了包括变形后节点位置、应力不变量、von Mise's~ 应力、各应力分量在内的位移与应力数据，并且将构造单元以~block~六面体实体格式进行输出，方便强度准则的应用。
      \item 测试模块是本组工作的一大亮点。通过使用持续集成服务，在每次与远端相关的推送与合并之前都可以进行一次编译检查和分片实验测试，防止错误和冲突影响到代码。这使得我们大幅度减少了~code review~的时间，同时保证了~master~的稳定性。并且，我们的测试脚本具有非常好的跨平台能力，能够分别在~Windows~和~ Linux~平台上自动链接~MKL~静态链接库，无需再手动进行任何设置。
    \end{itemize}

    第~\ref{chap:3}~$\sim$~\ref{chap:4}~章集中介绍了扩展后的~\texttt{STAP++}~程序拥有的基本单元与补充单元，共包括~Bar, 4Q, 3T, 9Q, 8H, 欧拉-伯努利梁、铁摩辛柯梁、矩形薄板、平板壳、截锥壳等~10~种常规单元，以及无限单元和过渡单元~2~种扩展单元。利用上述单元可以解决包括桥梁算例在内的各种类型的弹性力学问题，如平面问题（包括常规平面问题、无界问题、多尺度网格问题）、空间问题（包括空间杆系问题、圆柱壳问题、一般轴对称壳问题）等。一方面，我们充分考虑了包括梁板壳在内的构造单元的旋转自由度约束、个别方向刚度缺失等问题，通过改进输入文件格式、增加旋转自由度手动设置标签~\texttt{RotationDOFManuallyInputFlag}~等途径实现了在兼容已有输入格式基础上的完善。另一方面，在梁单元的构造中考虑了包括扭转在内的所有变形模态，并增加了适用于短粗梁的铁摩辛柯梁单元，可以更为有效地在再现工程中可能出现的各种梁结构问题。

    第~\ref{chap:5}~章重点介绍了~\texttt{STAP++}~程序的扩展功能，包括稀疏直接求解器、模态分析以及分片应力恢复等。稀疏求解器的难点在于非零元位置的标记工作，我们在避免内存访问冲突的基础上，通过在求解器阶段开启多线程选项以及内外存自动切换，有效实现了效率的大幅提升。由于时间所限，模态分析与分片应力恢复的工作均是以典型单元作为示范进行的，前者实现了基于~Bar~单元的广义特征值问题求解，后者则基于~8H~单元实现了分片应力恢复功能。上述扩展功能极大地提高了~\texttt{STAP++}~的性能，增强了后处理的功能，拓展了处理复杂问题的能力，可以说是本组工作的又一大亮点所在。

    \texttt{STAP++}~程序的这一最终版本是团队所有成员两个多月以来的不懈努力与紧密合作的结晶。我们的~FEM-3~团队从第~5~周周五晚第~1~次组会开始，到第~15~周周三下午的最终答辩结束，经历了共~10~次常设组会以及不计其数地线上线下讨论。从最初讨论程序各部分工作量的调研分工，到根据工作量与个人能力特点进行组内的任务分配，再到基本单元的集中处理冲突到深夜、专题调研的积极讨论到闭馆，最后到课程最终答辩时的胸有成竹……团队合作为更加高效地完成工作奠定了良好的基础，让我们在面临抉择时做出的每一个决定都更加踏实可靠，更是在紧密的合作中促成了团队每一个人之间的深厚革命情谊。
    在程序架构中，我们从多个方面尝试了对程序进行优化，详细的优化尝试请参看附录 \ref{app:3}。
    这里要特别提到的是，Git~作为一个敏捷高效的分布式版本控制系统，对于初学者其实并不是特别友好，这里要特别感谢管唯宇同学在有关~Git~软件的使用上对其余团队成员给予的热情帮助。详细的小组合作清单可以参看附录~\ref{app:4}。

    最后，感谢张雄老师和宋言学长在整个项目完成工作中对本组全组同学的耐心指导！感谢在部分任务中，其余组的部分同学与本组同学的积极讨论与互相扶持！最要感谢的，是我们组里的每一位同学，感谢大家一直以来的不懈努力以及团队所有成员的通力合作！

    \begin{flushright}
        FEM-3~全体成员

        钱学森力学班~2015~级

        \number\year.\number\month.\number\day
    \end{flushright}
